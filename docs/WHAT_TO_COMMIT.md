# What to Commit to GitHub

This guide explains what files should be committed to the repository for distribution via Swift Package Manager.

## âœ… Files to COMMIT

### Essential for SPM Users
```
ThorVG.xcframework/          # âš ï¸ CRITICAL - Pre-built binary
â”œâ”€â”€ Info.plist
â”œâ”€â”€ ios-arm64/
â”‚   â”œâ”€â”€ libthorvg.a
â”‚   â””â”€â”€ Headers/
â”œâ”€â”€ ios-arm64_x86_64-simulator/
â”‚   â”œâ”€â”€ libthorvg.a
â”‚   â””â”€â”€ Headers/
â””â”€â”€ macos-arm64_x86_64/
    â”œâ”€â”€ libthorvg.a
    â””â”€â”€ Headers/
```

**Why?** Users pull this pre-built binary - they don't compile ThorVG themselves.

### Package Configuration
```
Package.swift                # Swift Package Manager manifest
Package.resolved             # Dependency lock file
.gitignore                   # Excludes build artifacts
```

### Source Code
```
swift/                       # Swift wrapper code
â”œâ”€â”€ Animation.swift
â”œâ”€â”€ Canvas.swift
â”œâ”€â”€ Engine.swift
â”œâ”€â”€ Lottie.swift
â”œâ”€â”€ LottieRenderer.swift
â”œâ”€â”€ LottieRenderingError.swift
â”œâ”€â”€ Picture.swift
â””â”€â”€ PixelFormat.swift

swift-tests/                 # Test suite
â”œâ”€â”€ LottieTests.swift
â”œâ”€â”€ LottieRendererTests.swift
â”œâ”€â”€ Resources/
â””â”€â”€ SnapshotTests/
```

### Build Tools (for contributors)
```
build_frameworks.sh          # Script to rebuild XCFramework
thorvg/                      # Submodule reference (git handles this)
```

### Documentation & Resources
```
README.md                    # Main documentation
LICENSE                      # License file
res/                         # Resources (logo, etc.)
docs/                        # Additional documentation
â”œâ”€â”€ CONTRIBUTING.md
â”œâ”€â”€ MIGRATION_SUMMARY.md
â”œâ”€â”€ CROSS_COMPILATION_NOTES.md
â”œâ”€â”€ UPSTREAM_CONTRIBUTION_GUIDE.md
â””â”€â”€ WHAT_TO_COMMIT.md (this file)
```

---

## âŒ Files to IGNORE (in .gitignore)

### Build Artifacts (already in .gitignore)
```
build/                       # Meson build directory
lib/                         # Old standalone library
.build/                      # SPM build folder
xcuserdata/                  # Xcode user settings
.swiftpm/                    # SPM workspace data
```

These are generated by `build_frameworks.sh` and `swift build` - they shouldn't be committed.

---

## ğŸ“¦ How SPM Users Consume This Package

When someone adds your package to their `Package.swift`:

```swift
dependencies: [
    .package(url: "https://github.com/thorvg/thorvg.swift", from: "0.1.0")
]
```

SPM will:
1. Clone the repository
2. Read `Package.swift`
3. Download `ThorVG.xcframework` (already in the repo)
4. Link the appropriate platform slice (iOS/macOS) to their app
5. Compile only the Swift source code in `swift/`

**No compilation of ThorVG C++ code happens** - it's already compiled in the XCFramework!

---

## ğŸ”„ When to Update the XCFramework

You need to rebuild and recommit `ThorVG.xcframework/` when:

1. **Updating ThorVG version**
   ```bash
   cd thorvg
   git checkout v0.15.0  # example
   cd ..
   git add thorvg
   ```

2. **Changing build configuration** (e.g., enabling new loaders, features)
   - Edit `MESON_OPTIONS_BASE` in `build_frameworks.sh`

3. **After any change that affects the binary:**
   ```bash
   rm -rf ThorVG.xcframework build
   ./build_frameworks.sh
   git add ThorVG.xcframework
   git commit -m "Update ThorVG to v0.15.0"
   ```

---

## ğŸ“Š Repository Size Considerations

The `ThorVG.xcframework` is relatively small (~5-10 MB compressed) because:
- It's a static library (`.a` files), not a dynamic framework
- Users only download what's committed, not build artifacts
- Git LFS is not needed for files of this size

If the framework grows significantly, consider:
- Using Git LFS for `ThorVG.xcframework/`
- Creating a separate releases repository
- Hosting binaries via GitHub Releases

---

## âœ… Quick Checklist Before Pushing

Before you push to GitHub, verify:

- [ ] `ThorVG.xcframework/` exists and is complete
- [ ] `build/` and `lib/` are NOT committed (check `.gitignore`)
- [ ] Tests pass in Xcode (for iOS)
- [ ] `swift build` succeeds (for macOS)
- [ ] Documentation links in README point to correct `docs/` files
- [ ] Submodule reference (`thorvg/`) points to the correct commit

---

## ğŸ¯ Summary

**For distribution:** The `ThorVG.xcframework` is the key deliverable. Users need this pre-built binary - everything else (Swift code, tests, docs) is standard Swift package stuff.

**For contributors:** The `build_frameworks.sh` script and `docs/CONTRIBUTING.md` explain how to rebuild the framework if needed.

This approach balances **ease of use** (no Meson required for users) with **maintainability** (standard build system for contributors).

